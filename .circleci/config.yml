version: 2.1
parameters:
  commitMessage:
    type: string
    default: $(git log --format=oneline -n 1 $CIRCLE_SHA1)
executors:
  docker-node:
    docker: 
      - image: cimg/node:14.10.1
        auth:
          username: danecando
          password: $DOCKERHUB_PASSWORD
jobs:
  build-dev:
    executor: docker-node
    steps:
      - checkout
      - run: echo "<< parameters.commitMessage >>"
  build-prod:
    executor: docker-node
    steps:
      - checkout
      - run: echo "build-prod job ran"
workflows:
  build:
    jobs:
      - build-dev
